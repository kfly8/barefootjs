/**
 * Site Header Component
 *
 * Main header with logo, navigation, search, GitHub stars, and theme switcher.
 * Layout: [Logo | core | ui] --- [Search] [GitHub] [Theme]
 */

import { SearchButton } from './search-button'
import { GitHubStars } from './github-stars'
import { ThemeSwitcher } from './theme-switcher'

// Logo icon from images/logo.svg
function LogoIcon() {
  return (
    <svg
      class="h-6 w-6"
      viewBox="0 0 100 100"
      fill="currentColor"
    >
      <ellipse cx="18" cy="36" rx="9" ry="12" transform="rotate(-15 20 46)" />
      <ellipse cx="38" cy="34" rx="7" ry="10" transform="rotate(-8 38 44)" />
      <ellipse cx="54" cy="38" rx="6" ry="9" transform="rotate(0 54 50)" />
      <ellipse cx="68" cy="46" rx="4.5" ry="7" transform="rotate(8 68 56)" />
      <ellipse cx="80" cy="57" rx="3.5" ry="5.5" transform="rotate(15 80 60)" />
    </svg>
  )
}

function LogoText() {
  return (
    <svg class="h-6 w-auto" viewBox="0 0 153 31" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M151.888 10.7273L150.036 11.25C149.854 10.7273 149.596 10.2538 149.263 9.82954C148.93 9.4053 148.494 9.06818 147.956 8.81818C147.426 8.56818 146.767 8.44318 145.979 8.44318C144.797 8.44318 143.827 8.72348 143.07 9.28409C142.312 9.84469 141.934 10.5682 141.934 11.4545C141.934 12.2045 142.191 12.8144 142.706 13.2841C143.229 13.7462 144.032 14.1136 145.115 14.3864L147.752 15.0341C149.214 15.3901 150.309 15.9545 151.036 16.7273C151.771 17.5 152.138 18.4697 152.138 19.6364C152.138 20.6212 151.865 21.4962 151.32 22.2614C150.774 23.0265 150.013 23.6288 149.036 24.0682C148.066 24.5 146.941 24.7159 145.661 24.7159C143.956 24.7159 142.551 24.3333 141.445 23.5682C140.339 22.7955 139.63 21.6818 139.32 20.2273L141.263 19.75C141.513 20.7879 142.002 21.572 142.729 22.1023C143.464 22.6326 144.43 22.8977 145.627 22.8977C146.968 22.8977 148.04 22.5985 148.843 22C149.646 21.3939 150.047 20.6364 150.047 19.7273C150.047 19.0227 149.812 18.4318 149.343 17.9545C148.873 17.4697 148.161 17.1136 147.206 16.8864L144.354 16.2045C142.839 15.8409 141.718 15.2651 140.99 14.4773C140.263 13.6894 139.899 12.7121 139.899 11.5455C139.899 10.5833 140.161 9.73863 140.684 9.01136C141.206 8.27651 141.926 7.70075 142.843 7.28409C143.759 6.86742 144.805 6.65909 145.979 6.65909C147.577 6.65909 148.854 7.02272 149.809 7.75C150.771 8.46969 151.464 9.46212 151.888 10.7273Z" fill="currentColor"/>
<path d="M133.097 6.89772H135.131V26.0455C135.131 27.0379 134.946 27.8939 134.575 28.6136C134.211 29.3409 133.681 29.9015 132.984 30.2955C132.287 30.697 131.446 30.8977 130.461 30.8977C130.385 30.8977 130.309 30.8977 130.234 30.8977C130.158 30.8977 130.075 30.8939 129.984 30.8864L130.006 28.9886C130.082 28.9886 130.154 28.9886 130.222 28.9886C130.29 28.9886 130.362 28.9886 130.438 28.9886C131.272 28.9886 131.923 28.7311 132.393 28.2159C132.862 27.7008 133.097 26.9773 133.097 26.0455V6.89772ZM134.097 3.89772C133.688 3.89772 133.332 3.75757 133.029 3.47727C132.734 3.18939 132.586 2.84469 132.586 2.44318C132.586 2.04166 132.734 1.70075 133.029 1.42045C133.332 1.13257 133.688 0.988632 134.097 0.988632C134.514 0.988632 134.87 1.13257 135.165 1.42045C135.468 1.70075 135.62 2.04166 135.62 2.44318C135.62 2.84469 135.468 3.18939 135.165 3.47727C134.87 3.75757 134.514 3.89772 134.097 3.89772Z" fill="currentColor"/>
<path d="M126.414 24.5227C125.967 24.5227 125.581 24.3636 125.255 24.0455C124.937 23.7197 124.778 23.3333 124.778 22.8864C124.778 22.4318 124.937 22.0455 125.255 21.7273C125.581 21.4091 125.967 21.25 126.414 21.25C126.869 21.25 127.255 21.4091 127.574 21.7273C127.892 22.0455 128.051 22.4318 128.051 22.8864C128.051 23.1818 127.975 23.4545 127.824 23.7045C127.68 23.9545 127.483 24.1553 127.233 24.3068C126.99 24.4508 126.717 24.5227 126.414 24.5227Z" fill="currentColor"/>
<path d="M120.527 6.89771V8.65908H112.198V6.89771H120.527ZM114.8 2.7159H116.834V19.7954C116.834 20.5227 116.959 21.0947 117.209 21.5114C117.459 21.9204 117.785 22.2121 118.186 22.3864C118.588 22.553 119.016 22.6364 119.47 22.6364C119.735 22.6364 119.963 22.6212 120.152 22.5909C120.341 22.553 120.508 22.5151 120.652 22.4773L121.084 24.3068C120.887 24.3826 120.644 24.4507 120.357 24.5114C120.069 24.5795 119.713 24.6136 119.288 24.6136C118.546 24.6136 117.83 24.4507 117.141 24.125C116.459 23.7992 115.898 23.3144 115.459 22.6704C115.019 22.0265 114.8 21.2273 114.8 20.2727V2.7159Z" fill="currentColor"/>
<path d="M101.85 24.7159C100.342 24.7159 99.009 24.3333 97.8499 23.5682C96.6984 22.803 95.7968 21.7462 95.1453 20.3977C94.4938 19.0417 94.1681 17.4773 94.1681 15.7045C94.1681 13.9167 94.4938 12.3447 95.1453 10.9886C95.7968 9.625 96.6984 8.56439 97.8499 7.80681C99.009 7.04166 100.342 6.65909 101.85 6.65909C103.357 6.65909 104.687 7.04166 105.839 7.80681C106.99 8.57197 107.892 9.63257 108.543 10.9886C109.202 12.3447 109.532 13.9167 109.532 15.7045C109.532 17.4773 109.206 19.0417 108.554 20.3977C107.903 21.7462 106.998 22.803 105.839 23.5682C104.687 24.3333 103.357 24.7159 101.85 24.7159ZM101.85 22.8636C103.062 22.8636 104.089 22.5379 104.929 21.8864C105.77 21.2348 106.407 20.3674 106.839 19.2841C107.278 18.2008 107.498 17.0076 107.498 15.7045C107.498 14.4015 107.278 13.2045 106.839 12.1136C106.407 11.0227 105.77 10.1477 104.929 9.48863C104.089 8.82954 103.062 8.5 101.85 8.5C100.645 8.5 99.6188 8.82954 98.7703 9.48863C97.9294 10.1477 97.2893 11.0227 96.8499 12.1136C96.4181 13.2045 96.2021 14.4015 96.2021 15.7045C96.2021 17.0076 96.4181 18.2008 96.8499 19.2841C97.2893 20.3674 97.9294 21.2348 98.7703 21.8864C99.6112 22.5379 100.638 22.8636 101.85 22.8636Z" fill="currentColor"/>
<path d="M83.2636 24.7159C81.7561 24.7159 80.4227 24.3333 79.2636 23.5682C78.1121 22.803 77.2106 21.7462 76.5591 20.3977C75.9076 19.0417 75.5818 17.4773 75.5818 15.7045C75.5818 13.9167 75.9076 12.3447 76.5591 10.9886C77.2106 9.625 78.1121 8.56439 79.2636 7.80681C80.4227 7.04166 81.7561 6.65909 83.2636 6.65909C84.7712 6.65909 86.1008 7.04166 87.2523 7.80681C88.4038 8.57197 89.3053 9.63257 89.9568 10.9886C90.6159 12.3447 90.9454 13.9167 90.9454 15.7045C90.9454 17.4773 90.6197 19.0417 89.9682 20.3977C89.3167 21.7462 88.4114 22.803 87.2523 23.5682C86.1008 24.3333 84.7712 24.7159 83.2636 24.7159ZM83.2636 22.8636C84.4758 22.8636 85.5023 22.5379 86.3432 21.8864C87.1841 21.2348 87.8205 20.3674 88.2523 19.2841C88.6917 18.2008 88.9114 17.0076 88.9114 15.7045C88.9114 14.4015 88.6917 13.2045 88.2523 12.1136C87.8205 11.0227 87.1841 10.1477 86.3432 9.48863C85.5023 8.82954 84.4758 8.5 83.2636 8.5C82.0591 8.5 81.0326 8.82954 80.1841 9.48863C79.3432 10.1477 78.703 11.0227 78.2636 12.1136C77.8318 13.2045 77.6159 14.4015 77.6159 15.7045C77.6159 17.0076 77.8318 18.2008 78.2636 19.2841C78.703 20.3674 79.3432 21.2348 80.1841 21.8864C81.025 22.5379 82.0515 22.8636 83.2636 22.8636Z" fill="currentColor"/>
<path d="M73.4814 6.89773V8.65909H64.9018V6.89773H73.4814ZM67.5836 24.3523V4.34091C67.5836 3.40152 67.7996 2.60985 68.2314 1.96591C68.6708 1.32197 69.2427 0.833333 69.9473 0.5C70.6518 0.166667 71.398 0 72.1859 0C72.7162 0 73.1556 0.0454547 73.5041 0.136364C73.8602 0.219697 74.1405 0.303031 74.345 0.386364L73.7541 2.15909C73.6026 2.11364 73.417 2.06061 73.1973 2C72.9776 1.93939 72.7011 1.90909 72.3677 1.90909C71.4889 1.90909 70.8109 2.1553 70.3336 2.64773C69.8564 3.14015 69.6177 3.8447 69.6177 4.76136L69.6064 24.3523H67.5836Z" fill="currentColor"/>
<path d="M55.0826 24.7159C53.4538 24.7159 52.0447 24.3371 50.8553 23.5795C49.6659 22.8144 48.7455 21.7576 48.094 20.4091C47.45 19.053 47.1281 17.4924 47.1281 15.7273C47.1281 13.9697 47.45 12.4091 48.094 11.0455C48.7455 9.67424 49.6432 8.60227 50.7872 7.82954C51.9387 7.04924 53.2682 6.65909 54.7758 6.65909C55.7228 6.65909 56.6356 6.83333 57.5144 7.18181C58.3932 7.52272 59.1811 8.04924 59.8781 8.76136C60.5826 9.46591 61.1394 10.3561 61.5485 11.4318C61.9576 12.5 62.1622 13.7651 62.1622 15.2273V16.2273H48.5258V14.4432H60.094C60.094 13.322 59.8667 12.3144 59.4122 11.4205C58.9652 10.5189 58.3402 9.80682 57.5372 9.28409C56.7417 8.76136 55.8212 8.5 54.7758 8.5C53.6697 8.5 52.6962 8.79545 51.8553 9.38636C51.0144 9.97727 50.3553 10.7576 49.8781 11.7273C49.4084 12.697 49.1697 13.7576 49.1622 14.9091V15.9773C49.1622 17.3636 49.4008 18.5758 49.8781 19.6136C50.3629 20.6439 51.0485 21.4432 51.9349 22.0114C52.8212 22.5795 53.8705 22.8636 55.0826 22.8636C55.9084 22.8636 56.6319 22.7348 57.2531 22.4773C57.8819 22.2197 58.4084 21.875 58.8326 21.4432C59.2644 21.0038 59.5902 20.5227 59.8099 20L61.7303 20.625C61.4652 21.3598 61.0296 22.0379 60.4235 22.6591C59.825 23.2803 59.075 23.7803 58.1735 24.1591C57.2796 24.5303 56.2493 24.7159 55.0826 24.7159Z" fill="currentColor"/>
<path d="M37.4708 24.3523V6.89772H39.4367V9.57953H39.5844C39.9329 8.70075 40.539 7.99241 41.4026 7.45453C42.2738 6.90908 43.2587 6.63635 44.3572 6.63635C44.5238 6.63635 44.7094 6.64014 44.914 6.64772C45.1185 6.65529 45.289 6.66287 45.4253 6.67044V8.72726C45.3344 8.71211 45.1753 8.68938 44.9481 8.65908C44.7208 8.62878 44.4746 8.61363 44.2094 8.61363C43.3003 8.61363 42.4897 8.80681 41.7776 9.19317C41.0731 9.57196 40.5162 10.0985 40.1072 10.7727C39.6981 11.447 39.4935 12.2159 39.4935 13.0795V24.3523H37.4708Z" fill="currentColor"/>
<path d="M24.8533 24.75C23.8003 24.75 22.8381 24.5455 21.9669 24.1364C21.0957 23.7197 20.4025 23.1212 19.8874 22.3409C19.3722 21.553 19.1147 20.5985 19.1147 19.4773C19.1147 18.6136 19.2775 17.8864 19.6033 17.2955C19.929 16.7045 20.3912 16.2197 20.9897 15.8409C21.5881 15.4621 22.2965 15.1629 23.1147 14.9432C23.9328 14.7235 24.8344 14.553 25.8192 14.4318C26.7965 14.3106 27.6222 14.2045 28.2965 14.1136C28.9783 14.0227 29.4972 13.8788 29.8533 13.6818C30.2094 13.4848 30.3874 13.1667 30.3874 12.7273V12.3182C30.3874 11.1288 30.0313 10.1932 29.3192 9.51136C28.6147 8.82197 27.5995 8.47727 26.2737 8.47727C25.0162 8.47727 23.9897 8.75379 23.1942 9.30682C22.4063 9.85985 21.8533 10.5114 21.5351 11.2614L19.6147 10.5682C20.0086 9.61363 20.554 8.85227 21.251 8.28409C21.948 7.70833 22.7283 7.29545 23.5919 7.04545C24.4556 6.78788 25.3306 6.65909 26.2169 6.65909C26.8836 6.65909 27.5768 6.74621 28.2965 6.92045C29.0237 7.09469 29.698 7.39772 30.3192 7.82954C30.9404 8.25378 31.4442 8.84848 31.8306 9.61363C32.2169 10.3712 32.4101 11.3333 32.4101 12.5V24.3523H30.3874V21.5909H30.2624C30.02 22.1061 29.6601 22.6061 29.1828 23.0909C28.7056 23.5758 28.1071 23.9735 27.3874 24.2841C26.6677 24.5947 25.823 24.75 24.8533 24.75ZM25.126 22.8977C26.2018 22.8977 27.1336 22.6591 27.9215 22.1818C28.7094 21.7045 29.3154 21.072 29.7397 20.2841C30.1715 19.4886 30.3874 18.6136 30.3874 17.6591V15.1364C30.2359 15.2803 29.9821 15.4091 29.626 15.5227C29.2775 15.6364 28.8722 15.7386 28.4101 15.8295C27.9556 15.9129 27.501 15.9848 27.0465 16.0455C26.5919 16.1061 26.1828 16.1591 25.8192 16.2045C24.8344 16.3258 23.9934 16.5151 23.2965 16.7727C22.5995 17.0303 22.0654 17.3864 21.6942 17.8409C21.323 18.2879 21.1374 18.8636 21.1374 19.5682C21.1374 20.6288 21.5162 21.4508 22.2737 22.0341C23.0313 22.6098 23.9821 22.8977 25.126 22.8977Z" fill="currentColor"/>
<path d="M0 24.3523V1.07953H7.85227C9.36742 1.07953 10.6288 1.34468 11.6364 1.87498C12.6515 2.40529 13.4129 3.12877 13.9205 4.04544C14.428 4.96211 14.6818 6.00377 14.6818 7.17044C14.6818 8.14014 14.5189 8.96968 14.1932 9.65907C13.8674 10.3485 13.4242 10.9053 12.8636 11.3295C12.303 11.7538 11.678 12.0606 10.9886 12.25V12.4318C11.7386 12.4848 12.4659 12.75 13.1705 13.2273C13.875 13.697 14.4545 14.356 14.9091 15.2045C15.3636 16.053 15.5909 17.0682 15.5909 18.25C15.5909 19.4242 15.3295 20.4735 14.8068 21.3977C14.2841 22.3144 13.4811 23.0379 12.3977 23.5682C11.322 24.0909 9.95076 24.3523 8.28409 24.3523H0ZM2.125 22.4432H8.28409C10.0795 22.4432 11.4053 22.0454 12.2614 21.25C13.125 20.4545 13.5568 19.4545 13.5568 18.25C13.5568 17.3636 13.3409 16.5606 12.9091 15.8409C12.4848 15.1136 11.8826 14.5379 11.1023 14.1136C10.3295 13.6894 9.42045 13.4773 8.375 13.4773H2.125V22.4432ZM2.125 11.5909H8.04545C8.96212 11.5909 9.76515 11.4015 10.4545 11.0227C11.1439 10.6439 11.6818 10.1212 12.0682 9.45453C12.4545 8.78786 12.6477 8.0265 12.6477 7.17044C12.6477 5.93559 12.2462 4.9318 11.4432 4.15907C10.6402 3.37877 9.44318 2.98862 7.85227 2.98862H2.125V11.5909Z" fill="currentColor"/>
</svg>
  )
}

function LogoLink() {
  return (
    <a
      href="/"
      class="flex items-center gap-1 text-foreground transition-colors no-underline"
    >
      <LogoIcon />
      <LogoText />
    </a>
  )
}

export interface HeaderProps {
  currentPath?: string
}

export function Header({ currentPath = '/' }: HeaderProps) {
  // Check if a nav item is active
  const isActive = (path: string) => {
    if (path === '/') return currentPath === '/'
    return currentPath.startsWith(path)
  }

  return (
    <header class="hidden sm:block fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border">
      <div class="px-6 h-14 flex items-center justify-between gap-4">
        {/* Left section: Logo + Navigation */}
        <div class="flex items-center gap-6">
          {/* Logo */}
          <LogoLink />

          {/* Navigation separator */}
          <div class="hidden sm:block h-5 w-px bg-border" />

          {/* Navigation links */}
          <nav class="hidden sm:flex items-center gap-1">
            <a
              href="/docs/core"
              class={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors no-underline ${
                isActive('/docs/core')
                  ? 'bg-accent text-foreground'
                  : 'text-muted-foreground hover:text-foreground hover:bg-accent/50'
              }`}
            >
              core
            </a>
            <a
              href="/components"
              class={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors no-underline ${
                isActive('/components') || isActive('/forms')
                  ? 'bg-accent text-foreground'
                  : 'text-muted-foreground hover:text-foreground hover:bg-accent/50'
              }`}
            >
              ui
            </a>
          </nav>
        </div>

        {/* Right section: Search + GitHub + Theme */}
        <div class="flex items-center gap-4">
          <SearchButton />
          <GitHubStars repo="kfly8/barefootjs" />
          <ThemeSwitcher defaultTheme="system" />
        </div>
      </div>
    </header>
  )
}
